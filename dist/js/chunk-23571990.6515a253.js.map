{"version":3,"sources":["webpack:///./src/views/Visualizer.vue?a364","webpack:///./src/util/Particle.js","webpack:///./src/views/Visualizer.vue?5fcc","webpack:///src/views/Visualizer.vue","webpack:///./src/views/Visualizer.vue?cb98","webpack:///./src/views/Visualizer.vue?7346"],"names":["_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_lib_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_Visualizer_vue_vue_type_style_index_0_id_297e9450_scoped_true_lang_css___WEBPACK_IMPORTED_MODULE_0__","__webpack_require__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_lib_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_Visualizer_vue_vue_type_style_index_0_id_297e9450_scoped_true_lang_css___WEBPACK_IMPORTED_MODULE_0___default","n","NUM_BANDS","SCALE","MIN","MAX","SPEED","ALPHA","SPIN","SIZE","COLORS","random","min","max","isArray","Math","length","isNumber","object","Object","prototype","toString","call","Particle","[object Object]","x1","y1","this","x","y","reset","level","floor","scale","alpha","speed","color","size","spin","band","smoothedScale","smoothedAlpha","decayScale","decayAlpha","rotation","PI","energy","ctx","power","exp","save","beginPath","translate","cos","rotate","moveTo","lineTo","lineWidth","lineCap","globalAlpha","strokeStyle","stroke","restore","__webpack_exports__","render","_vm","_h","$createElement","_c","_self","attrs","id","ref","staticStyle","text-align","ok-only","title","_v","staticRenderFns","Visualizervue_type_script_lang_js_","token","trackId","trackName","trackDuration","transferred","isPaused","NUM_PARTICLES","particles","height","width","ratio","bands","requestid","canvas","HTMLElement","sockets","playerReady","data","playerId","player_id","transfer","stateChanged","state","paused","track_window","current_track","name","tokenRefreshed","played","chrome","runtime","sendMessage","response","listening","$refs","myModalRef","show","$router","replace","window","addEventListener","event","source","type","sizeCanvas","cancelAnimationFrame","document","getElementById","methods","devicePixelRatio","innerHeight","innerWidth","undefined","setAttribute","getContext","globalCompositeOperation","SpotifyService","transferDevicePlayer","localStorage","device_id","access_token","play","success","setup","getTrackInfo","analyzeTrack","i","particle","push","requestAnimationFrame","draw","clearRect","update","j","move","views_Visualizervue_type_script_lang_js_","component","componentNormalizer","options","__file"],"mappings":"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","file":"js/chunk-23571990.6515a253.js","sourcesContent":["import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/lib/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Visualizer.vue?vue&type=style&index=0&id=297e9450&scoped=true&lang=css&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/lib/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Visualizer.vue?vue&type=style&index=0&id=297e9450&scoped=true&lang=css&\"","const NUM_BANDS = 256;\nconst SCALE = {\n\tMIN: 15.0,\n\tMAX: 80.0\n};\nconst SPEED = {\n\tMIN: 0.2,\n\tMAX: 1.0\n};\nconst ALPHA = {\n\tMIN: 0.8,\n\tMAX: 0.9\n};\nconst SPIN = {\n\tMIN: 0.001,\n\tMAX: 0.005\n};\nconst SIZE = {\n\tMIN: 1.0,\n\tMAX: 1.25\n};\nconst COLORS = ['#69D2E7', '#1B676B', '#BEF202', '#EBE54D', '#00CDAC', '#1693A5', '#F9D423', '#FF4E50', '#E7204E', '#0CCABA', '#FF006F'];\n\nfunction random (min, max = undefined) {\n\n\tif (isArray(min))\n\n\t\treturn min[~~(Math.random() * min.length)];\n\n\tif (!isNumber(max))\n\n\t\tmax = min || 1, min = 0;\n\n\treturn min + Math.random() * (max - min);\n}\n\nfunction isArray(object) {\n\n\treturn Object.prototype.toString.call(object) == '[object Array]';\n}\n\nfunction isNumber(object) {\n\n\treturn typeof object == 'number';\n}\n\n\nvar Particle = class Particle {\n\n\tconstructor(x1 = 0, y1 = 0) {\n\t\tthis.x = x1;\n\t\tthis.y = y1;\n\t\tthis.reset();\n\t}\n\n\treset() {\n\t\tthis.level = 1 + Math.floor(random(4));\n\t\tthis.scale = random(SCALE.MIN, SCALE.MAX);\n\t\tthis.alpha = random(ALPHA.MIN, ALPHA.MAX);\n\t\tthis.speed = random(SPEED.MIN, SPEED.MAX);\n\t\tthis.color = random(COLORS);\n\t\tthis.size = random(SIZE.MIN, SIZE.MAX);\n\t\tthis.spin = random(SPIN.MAX, SPIN.MAX);\n\t\tthis.band = Math.floor(random(NUM_BANDS));\n\t\tif (random() < 0.5) {\n\t\t\tthis.spin = -this.spin;\n\t\t}\n\t\tthis.smoothedScale = 0.0;\n\t\tthis.smoothedAlpha = 0.0;\n\t\tthis.decayScale = 0.0;\n\t\tthis.decayAlpha = 0.0;\n\t\tthis.rotation = random(Math.PI * 2);\n\t\treturn this.energy = 0.0;\n\t}\n\n\tmove() {\n\t\tthis.rotation += this.spin;\n\t\treturn this.y -= (this.speed/1.5) * this.level;\n\t}\n\n\tdraw(ctx) {\n\t\tvar alpha, power, scale;\n\t\tpower = Math.exp(this.energy);\n\t\tscale = this.scale * power;\n\t\talpha = this.alpha * this.energy * 1.5;\n\t\tthis.decayScale = Math.max(this.decayScale, scale);\n\t\tthis.decayAlpha = Math.max(this.decayAlpha, alpha);\n\t\tthis.smoothedScale += (this.decayScale - this.smoothedScale) * 0.3;\n\t\tthis.smoothedAlpha += (this.decayAlpha - this.smoothedAlpha) * 0.3;\n\t\tthis.decayScale *= 0.985;\n\t\tthis.decayAlpha *= 0.975;\n\t\tctx.save();\n\t\tctx.beginPath();\n\t\tctx.translate(this.x + Math.cos(this.rotation * this.speed) * 250, this.y);\n\t\tctx.rotate(this.rotation);\n\t\tctx.scale(this.smoothedScale * (this.level/2.5), this.smoothedScale * (this.level/2.5));\n\t\tctx.moveTo(this.size * 0.5, 0);\n\t\tctx.lineTo(this.size * -0.5, 0);\n\t\tctx.lineWidth = 1;\n\t\tctx.lineCap = 'round';\n\t\tctx.globalAlpha = this.smoothedAlpha / this.level;\n\t\tctx.strokeStyle = this.color;\n\t\tctx.stroke();\n\t\treturn ctx.restore();\n\t}\n}\n\nexport default Particle;","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"visualizer\"}},[_c('canvas',{attrs:{\"id\":\"canvas1\"}}),_c('b-modal',{ref:\"myModalRef\",staticStyle:{\"color\":\"black\",\"text-align\":\"center\"},attrs:{\"ok-only\":\"\",\"title\":\"Whoops...\"}},[_c('p',[_vm._v(\"Click the Spotilize extension button in the Chrome toolbar to start the visualizer!\")])])],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n\t<div id='visualizer'>\n\t\t<canvas id='canvas1'></canvas>\n\t\t<b-modal ref=\"myModalRef\" ok-only style='color:black;text-align:center' title='Whoops...'>\n\t\t\t<p>Click the Spotilize extension button in the Chrome toolbar to start the visualizer!</p>\n\t\t</b-modal>\n\t</div>\n</template>\n\n<script>\nimport SpotifyService from '@/services/SpotifyService';\nimport Particle from '@/util/Particle.js';\nimport Controls from '@/components/Controls';\n\n\nexport default {\n\tdata() {\n\t\treturn {\n\t\t\ttoken: '',\n\t\t\ttrackId: '',\n\t\t\ttrackName: '',\n\t\t\ttrackDuration: 0,\n\t\t\ttransferred: false,\n\t\t\tisPaused: false,\n\t\t\tNUM_PARTICLES: 200,\n\t\t\tparticles: [],\n\t\t\theight: null,\n\t\t\twidth: null,\n\t\t\tratio: null,\n\t\t\tctx: null,\n\t\t\tbands: null,\n\t\t\trequestid: null,\n\t\t\tcanvas: HTMLElement,\n\t\t}\n\t},\n\tsockets: {\n\t\tplayerReady: function(data) {\n\t\t\tthis.token = data.token;\n\t\t\tthis.playerId = data.player_id;\n\t\t\tif(this.transferred === false) {\n\t\t\t\tthis.transfer();\n\t\t\t}\n\t\t},\n\t\tstateChanged: function(data) {\n\t\t\tif(data.state.paused !== true && this.trackId !== data.state.track_window.current_track.id) {\n\t\t\t\tthis.trackId = data.state.track_window.current_track.id;\n\t\t\t\tthis.trackName = data.state.track_window.current_track.name;\n\t\t\t\tif(this.transferred === false) {\n\t\t\t\t\tthis.transfer();\n\t\t\t\t}\n\t\t\t}\n\t\t\tif(data.state.paused === true) {\n\t\t\t\tthis.isPaused = true;\n\t\t\t} else {\n\t\t\t\tthis.isPaused = false;\n\t\t\t}\n\t\t},\n\t\ttokenRefreshed: function(data) {\n\t\t\tthis.token = data.token;\n\t\t},\n\t\tpaused: function() {\n\n\t\t},\n\t\tplayed: function() {\n\t\t\t\n\t\t}\n\t},\n\tcreated() {\n\t\tchrome.runtime.sendMessage('jidcihllhnmbjbnoijfepopdpkpgeobe', 'listening', (response) => {\n        if(!response) {\n          this.$router.replace({name: 'home'});\n        } else if(response.listening === false) {\n\t\t\t  this.$refs.myModalRef.show();\n        }\n      });\n\t\tthis.bands = null;\n\t\twindow.addEventListener(\"message\", (event) => {\n\t\t\t// We only accept messages from ourselves\n\t\t\tif (event.source != window)\n\t\t\t\treturn;\n\t\t\tif(event.data.type = \"frequency_data\")\n\t\t\t\tthis.bands = event.data.data;\n\t\t\tif(event.data.type = \"fullScreenDone\")\n\t\t\t\tthis.sizeCanvas();\n\t\t});\n\t},\n\tbeforeDestroy() {\n\t\tthis.NUM_PARTICLES = 150;\n\t\tthis.particles = [];\n\t\tthis.bands = null;\n\t\tthis.ctx = null;\n\t\tthis.canvas = null;\n\t\twindow.cancelAnimationFrame(this.requestid);\n\t},\n\tmounted() {\n\t\tthis.canvas = document.getElementById('canvas1');\n\t\tthis.sizeCanvas();\n\t},\n\tmethods: {\n\t\tsizeCanvas() {\n\t\t\tthis.ratio = window.devicePixelRatio;\n\t\t\tthis.height = window.innerHeight;\n\t\t\tthis.width = window.innerWidth;\n\t\t\t//scale the canvas\n\t\t\tif(this.canvas !== null && this.canvas !== undefined) {\n\t\t\t\tthis.canvas.setAttribute('height', this.height * this.ratio);\n\t\t\t\tthis.canvas.setAttribute('width', this.width * this.ratio);\n\t\t\t\tthis.ctx = this.canvas.getContext('2d');\n\t\t\t\tthis.ctx.globalCompositeOperation = 'lighter';\n\t\t\t}\n\t\t},\n\t\tasync transfer() {\n\t\t\tconst response = await SpotifyService.transferDevicePlayer({player_id: localStorage.device_id, access_token: localStorage.access_token, play: true});\n\t\t\tif(response.data.success === true) {\n\t\t\t\tthis.setup();\n\t\t\t\tthis.transferred = true;\n\t\t\t}\n\t\t},\n\t\tasync getTrackInfo() {\n\t\t\tconst response = await SpotifyService.getTrackInfo(localStorage.access_token, this.trackId);\n\t\t\tif(response.data.success === true) {\n\n\t\t\t}\n\t\t},\n\t\tasync analyze() {\n\t\t\tconst response = await SpotifyService.analyzeTrack(localStorage.access_token, this.trackId);\n\t\t\tif(response.data.success === true) {\n\t\t\t\t\n\t\t\t}\n\t\t},\n\t\tsetup() {\n\t\t\tvar i, j, particle, x, y;\n\t\t\tfor (i = 0; i <= this.NUM_PARTICLES - 1; i++) {\n        \t\tx = this.random(this.width);\n        \t\ty = this.random(this.height);\n        \t\tparticle = new Particle(x, y);\n        \t\tparticle.energy = this.random(particle.band / 256);\n        \t\tthis.particles.push(particle);\n\t\t\t}\n\t\t\tthis.requestid = requestAnimationFrame(this.draw);\n\t\t},\n\t\tdraw() {\n\t\t\tthis.ctx.clearRect(0, 0, this.width * this.ratio, this.height * this.ratio);\n\t\t\tthis.update();\n\t\t\tthis.requestid = requestAnimationFrame(this.draw);\n\t\t},\n\t\tupdate() {\n\t\t\tlet particle;\n      \tfor (let j = 0; j < this.particles.length; j++) {\n\t\t\t\t  particle = this.particles[j];\n\t\t\t\t  if(this.bands !== undefined && this.bands !== null) {\n\t\t\t\t\t  particle.energy = this.bands[particle.band] / 256;\n\t\t\t\t  }\n        \t\t// recycle particles\n        \t\tif (particle.y < -particle.size * particle.level * particle.scale) {\n         \t\tparticle.reset();\n          \t\tparticle.x = this.random(this.width);\n\t\t\t\t\tparticle.y = this.height + (particle.size * particle.scale * particle.level);\n        \t\t}\n        \t\tparticle.move();\n        \t\tparticle.draw(this.ctx);\n\t\t\t}\n\t\t},\n\t\trandom (min, max = undefined) {\n\t\t\tif (this.isArray(min))\n\t\t\t\treturn min[~~(Math.random() * min.length)];\n\t\t\tif (!this.isNumber(max))\n\t\t\t\tmax = min || 1, min = 0;\n\t\t\treturn min + Math.random() * (max - min);\n\t\t},\n\t\tisArray(object) {\n\t\t\treturn Object.prototype.toString.call(object) == '[object Array]';\n\t\t},\n\t\tisNumber(object) {\n\t\t\treturn typeof object == 'number';\n\t\t}\n\t}\n}\n</script>\n\n<style scoped>\n#visualizer {\n\theight: 100%;\n\tcolor: white;\n\tbackground: #13242f;\n}\n#canvas {\n\tz-index: -1;\n}\n#visualizer:before {\n  background-size: 100%;\n  background-image: url('data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4gPHN2ZyB2ZXJzaW9uPSIxLjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PGRlZnM+PHJhZGlhbEdyYWRpZW50IGlkPSJncmFkIiBncmFkaWVudFVuaXRzPSJ1c2VyU3BhY2VPblVzZSIgY3g9IjUwJSIgY3k9IiIgcj0iOTUlIj48c3RvcCBvZmZzZXQ9IjIwJSIgc3RvcC1jb2xvcj0iIzAwMDAwMCIgc3RvcC1vcGFjaXR5PSIwLjAiLz48c3RvcCBvZmZzZXQ9Ijk1JSIgc3RvcC1jb2xvcj0iIzAwMDAwMCIvPjwvcmFkaWFsR3JhZGllbnQ+PC9kZWZzPjxyZWN0IHg9IjAiIHk9IjAiIHdpZHRoPSIxMDAlIiBoZWlnaHQ9IjEwMCUiIGZpbGw9InVybCgjZ3JhZCkiIC8+PC9zdmc+IA==');\n  background-image: -moz-radial-gradient(center, ellipse cover, rgba(0, 0, 0, 0) 20%, #000000 95%);\n  background-image: -webkit-radial-gradient(center, ellipse cover, rgba(0, 0, 0, 0) 20%, #000000 95%);\n  background-image: radial-gradient(ellipse cover at center, rgba(0, 0, 0, 0) 20%, #000000 95%);\n  position: absolute;\n  content: \"\";\n  z-index: 0;\n  opacity: 0.9;\n  height: 100%;\n  width: 100%;\n  left: 0;\n  top: 0;\n}\n#visualizer:after {\n\tbackground: url(\"https://s.cdpn.io/1715/noise-1.png\");\n  \tposition: absolute;\n  \tcontent: \"\";\n  \tz-index: 0;\n  \topacity: 0.8;\n  \theight: 100%;\n  \twidth: 100%;\n  \tleft: 0;\n  \ttop: 0;\n}\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Visualizer.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Visualizer.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Visualizer.vue?vue&type=template&id=297e9450&scoped=true&\"\nimport script from \"./Visualizer.vue?vue&type=script&lang=js&\"\nexport * from \"./Visualizer.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Visualizer.vue?vue&type=style&index=0&id=297e9450&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"297e9450\",\n  null\n  \n)\n\ncomponent.options.__file = \"Visualizer.vue\"\nexport default component.exports"],"sourceRoot":""}