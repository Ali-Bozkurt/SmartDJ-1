(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-23571990"],{"006c":function(t,e,s){"use strict";var a=s("1762"),i=s.n(a);i.a},1762:function(t,e,s){},6319:function(t,e,s){"use strict";const a=256,i={MIN:15,MAX:80},h={MIN:.2,MAX:1},n={MIN:.8,MAX:.9},r={MIN:.001,MAX:.005},o={MIN:1,MAX:1.25},c=["#69D2E7","#1B676B","#BEF202","#EBE54D","#00CDAC","#1693A5","#F9D423","#FF4E50","#E7204E","#0CCABA","#FF006F"];function l(t,e){return d(t)?t[~~(Math.random()*t.length)]:(u(e)||(e=t||1,t=0),t+Math.random()*(e-t))}function d(t){return"[object Array]"==Object.prototype.toString.call(t)}function u(t){return"number"==typeof t}var p=class{constructor(t=0,e=0){this.x=t,this.y=e,this.reset()}reset(){return this.level=1+Math.floor(l(4)),this.scale=l(i.MIN,i.MAX),this.alpha=l(n.MIN,n.MAX),this.speed=l(h.MIN,h.MAX),this.color=l(c),this.size=l(o.MIN,o.MAX),this.spin=l(r.MAX,r.MAX),this.band=Math.floor(l(a)),l()<.5&&(this.spin=-this.spin),this.smoothedScale=0,this.smoothedAlpha=0,this.decayScale=0,this.decayAlpha=0,this.rotation=l(2*Math.PI),this.energy=0}move(){return this.rotation+=this.spin,this.y-=this.speed/1.5*this.level}draw(t){var e,s,a;return s=Math.exp(this.energy),a=this.scale*s,e=this.alpha*this.energy*1.5,this.decayScale=Math.max(this.decayScale,a),this.decayAlpha=Math.max(this.decayAlpha,e),this.smoothedScale+=.3*(this.decayScale-this.smoothedScale),this.smoothedAlpha+=.3*(this.decayAlpha-this.smoothedAlpha),this.decayScale*=.985,this.decayAlpha*=.975,t.save(),t.beginPath(),t.translate(this.x+250*Math.cos(this.rotation*this.speed),this.y),t.rotate(this.rotation),t.scale(this.smoothedScale*(this.level/2.5),this.smoothedScale*(this.level/2.5)),t.moveTo(.5*this.size,0),t.lineTo(-.5*this.size,0),t.lineWidth=1,t.lineCap="round",t.globalAlpha=this.smoothedAlpha/this.level,t.strokeStyle=this.color,t.stroke(),t.restore()}};e["a"]=p},f3fc:function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{attrs:{id:"visualizer"}},[s("canvas",{attrs:{id:"canvas1"}}),s("b-modal",{ref:"myModalRef",staticStyle:{color:"black","text-align":"center"},attrs:{"ok-only":"",title:"Whoops..."}},[s("p",[t._v("Click the Spotilize extension button in the Chrome toolbar to start the visualizer!")])])],1)},i=[],h=s("2f94"),n=s("6319"),r=(s("c75a"),{data(){return{token:"",trackId:"",trackName:"",trackDuration:0,transferred:!1,isPaused:!1,NUM_PARTICLES:200,particles:[],height:null,width:null,ratio:null,ctx:null,bands:null,requestid:null,canvas:HTMLElement}},sockets:{playerReady:function(t){this.token=t.token,this.playerId=t.player_id,!1===this.transferred&&this.transfer()},stateChanged:function(t){!0!==t.state.paused&&this.trackId!==t.state.track_window.current_track.id&&(this.trackId=t.state.track_window.current_track.id,this.trackName=t.state.track_window.current_track.name,!1===this.transferred&&this.transfer()),!0===t.state.paused?this.isPaused=!0:this.isPaused=!1},tokenRefreshed:function(t){this.token=t.token},paused:function(){},played:function(){}},created(){chrome.runtime.sendMessage("jidcihllhnmbjbnoijfepopdpkpgeobe","listening",t=>{t?!1===t.listening&&this.$refs.myModalRef.show():this.$router.replace({name:"home"})}),this.bands=null,window.addEventListener("message",t=>{t.source==window&&((t.data.type="frequency_data")&&(this.bands=t.data.data),(t.data.type="fullScreenDone")&&this.sizeCanvas())})},beforeDestroy(){this.NUM_PARTICLES=150,this.particles=[],this.bands=null,this.ctx=null,this.canvas=null,window.cancelAnimationFrame(this.requestid)},mounted(){this.canvas=document.getElementById("canvas1"),this.sizeCanvas()},methods:{sizeCanvas(){this.ratio=window.devicePixelRatio,this.height=window.innerHeight,this.width=window.innerWidth,null!==this.canvas&&void 0!==this.canvas&&(this.canvas.setAttribute("height",this.height*this.ratio),this.canvas.setAttribute("width",this.width*this.ratio),this.ctx=this.canvas.getContext("2d"),this.ctx.globalCompositeOperation="lighter")},async transfer(){const t=await h["a"].transferDevicePlayer({player_id:localStorage.device_id,access_token:localStorage.access_token,play:!0});!0===t.data.success&&(this.setup(),this.transferred=!0)},async getTrackInfo(){const t=await h["a"].getTrackInfo(localStorage.access_token,this.trackId);t.data.success},async analyze(){const t=await h["a"].analyzeTrack(localStorage.access_token,this.trackId);t.data.success},setup(){var t,e,s,a;for(t=0;t<=this.NUM_PARTICLES-1;t++)s=this.random(this.width),a=this.random(this.height),e=new n["a"](s,a),e.energy=this.random(e.band/256),this.particles.push(e);this.requestid=requestAnimationFrame(this.draw)},draw(){this.ctx.clearRect(0,0,this.width*this.ratio,this.height*this.ratio),this.update(),this.requestid=requestAnimationFrame(this.draw)},update(){let t;for(let e=0;e<this.particles.length;e++)t=this.particles[e],void 0!==this.bands&&null!==this.bands&&(t.energy=this.bands[t.band]/256),t.y<-t.size*t.level*t.scale&&(t.reset(),t.x=this.random(this.width),t.y=this.height+t.size*t.scale*t.level),t.move(),t.draw(this.ctx)},random(t,e){return this.isArray(t)?t[~~(Math.random()*t.length)]:(this.isNumber(e)||(e=t||1,t=0),t+Math.random()*(e-t))},isArray(t){return"[object Array]"==Object.prototype.toString.call(t)},isNumber(t){return"number"==typeof t}}}),o=r,c=(s("006c"),s("2877")),l=Object(c["a"])(o,a,i,!1,null,"297e9450",null);l.options.__file="Visualizer.vue";e["default"]=l.exports}}]);
//# sourceMappingURL=chunk-23571990.6515a253.js.map