(function(e){function t(t){for(var a,n,o=t[0],c=t[1],l=t[2],u=0,d=[];u<o.length;u++)n=o[u],r[n]&&d.push(r[n][0]),r[n]=0;for(a in c)Object.prototype.hasOwnProperty.call(c,a)&&(e[a]=c[a]);h&&h(t);while(d.length)d.shift()();return i.push.apply(i,l||[]),s()}function s(){for(var e,t=0;t<i.length;t++){for(var s=i[t],a=!0,n=1;n<s.length;n++){var o=s[n];0!==r[o]&&(a=!1)}a&&(i.splice(t--,1),e=c(c.s=s[0]))}return e}var a={},n={app:0},r={app:0},i=[];function o(e){return c.p+"js/"+({}[e]||e)+"."+{"chunk-177a1e37":"393d8d43","chunk-23571990":"6515a253","chunk-47e8eefe":"ff524f97","chunk-79f8d383":"e146668c"}[e]+".js"}function c(t){if(a[t])return a[t].exports;var s=a[t]={i:t,l:!1,exports:{}};return e[t].call(s.exports,s,s.exports,c),s.l=!0,s.exports}c.e=function(e){var t=[],s={"chunk-177a1e37":1,"chunk-23571990":1,"chunk-47e8eefe":1,"chunk-79f8d383":1};n[e]?t.push(n[e]):0!==n[e]&&s[e]&&t.push(n[e]=new Promise(function(t,s){for(var a="css/"+({}[e]||e)+"."+{"chunk-177a1e37":"4da1c273","chunk-23571990":"9b291887","chunk-47e8eefe":"48b12002","chunk-79f8d383":"2d46f4b0"}[e]+".css",n=c.p+a,r=document.getElementsByTagName("link"),i=0;i<r.length;i++){var o=r[i],l=o.getAttribute("data-href")||o.getAttribute("href");if("stylesheet"===o.rel&&(l===a||l===n))return t()}var u=document.getElementsByTagName("style");for(i=0;i<u.length;i++){o=u[i],l=o.getAttribute("data-href");if(l===a||l===n)return t()}var d=document.createElement("link");d.rel="stylesheet",d.type="text/css",d.onload=t,d.onerror=function(t){var a=t&&t.target&&t.target.src||n,r=new Error("Loading CSS chunk "+e+" failed.\n("+a+")");r.request=a,s(r)},d.href=n;var h=document.getElementsByTagName("head")[0];h.appendChild(d)}).then(function(){n[e]=0}));var a=r[e];if(0!==a)if(a)t.push(a[2]);else{var i=new Promise(function(t,s){a=r[e]=[t,s]});t.push(a[2]=i);var l,u=document.getElementsByTagName("head")[0],d=document.createElement("script");d.charset="utf-8",d.timeout=120,c.nc&&d.setAttribute("nonce",c.nc),d.src=o(e),l=function(t){d.onerror=d.onload=null,clearTimeout(h);var s=r[e];if(0!==s){if(s){var a=t&&("load"===t.type?"missing":t.type),n=t&&t.target&&t.target.src,i=new Error("Loading chunk "+e+" failed.\n("+a+": "+n+")");i.type=a,i.request=n,s[1](i)}r[e]=void 0}};var h=setTimeout(function(){l({type:"timeout",target:d})},12e4);d.onerror=d.onload=l,u.appendChild(d)}return Promise.all(t)},c.m=e,c.c=a,c.d=function(e,t,s){c.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:s})},c.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},c.t=function(e,t){if(1&t&&(e=c(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var s=Object.create(null);if(c.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)c.d(s,a,function(t){return e[t]}.bind(null,a));return s},c.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return c.d(t,"a",t),t},c.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},c.p="/",c.oe=function(e){throw console.error(e),e};var l=window["webpackJsonp"]=window["webpackJsonp"]||[],u=l.push.bind(l);l.push=t,l=l.slice();for(var d=0;d<l.length;d++)t(l[d]);var h=u;i.push([0,"chunk-vendors"]),s()})({0:function(e,t,s){e.exports=s("56d7")},"034f":function(e,t,s){"use strict";var a=s("c21b"),n=s.n(a);n.a},"0785":function(e,t,s){"use strict";var a=s("b400"),n=s.n(a);n.a},"2f94":function(e,t,s){"use strict";var a,n,r,i=s("bc3a"),o=s.n(i);void 0===a?(n="https://spotilize.herokuapp.com",r=""):(n=a.baseURL,r=a.serverPort);var c=n+r+"/spotify",l=()=>{return o.a.create({baseURL:c})};t["a"]={link(){return l().get("/link")},exchange(e){return l().post("/authorize",e)},refreshToken(e){return l().post("/access_token/refresh",{refresh_token:e})},getDevices(e){return l().get(`/devices/${e}`)},startPlayer(){return l().post("/player/open")},play(e){return l().put("/play",e)},pause(e){return l().put("/pause",e)},nextTrack(e){return l().post("/next",e)},previousTrack(e){return l().post("/prev",e)},seek(e){return l().put("/seek",e)},repeat(e){return l().put("/repeat",e)},shuffle(e){return l().put("/shuffle",e)},setVolume(e){return l().put("/volume",e)},getProfile(e){return l().get(`/profile/${e}`)},getCurrentlyPlaying(e){return l().get(`/currently_playing/${e}`)},getRecentlyPlayed(e){return l().get(`/recently_played/${e}`)},getTopArtists(e){return l().get(`/top_artists/${e}`)},getTrackInfo(e,t){return l().get(`/track/${e}/${t}`)},analyzeTrack(e,t){return l().get(`/analyze/${e}/${t}`)},transferDevicePlayer(e){return l().put("/transfer/player",e)},transferDevice(e){return l().put(`/transfer/${e}`)}}},"56d7":function(e,t,s){"use strict";s.r(t);var a=s("2b0e"),n=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{class:{show:e.isShowing},attrs:{id:"app"}},[s("notifications",{staticClass:"notif",attrs:{group:"track"}}),!1===e.landing?s("Hamburger",{staticClass:"controls",class:{show:e.isShowing}}):e._e(),s("router-view"),!1===e.landing?s("div",{staticClass:"controls-wrapper"},[s("Controls",{staticClass:"controls",class:{show:e.isShowing},attrs:{token:e.token,artist:e.artist,album:e.album,track:e.track,paused:e.paused}})],1):e._e()],1)},r=[],i=s("2f94"),o=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{attrs:{id:"nav"}},[s("router-link",{attrs:{to:"/visualizer"}},[e._v("Visualizer")]),s("router-link",{attrs:{to:"/system_settings"}},[e._v("System")])],1)},c=[],l={name:"Nav"},u=l,d=(s("919b"),s("2877")),h=Object(d["a"])(u,o,c,!1,null,"0ed971ad",null);h.options.__file="Nav.vue";var p=h.exports,f=s("c75a"),g=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{attrs:{id:"menu"}},[s("input",{staticClass:"input-toggler",attrs:{type:"checkbox",id:"menuToggler"},on:{click:function(t){e.active=!e.active}}}),e._m(0),s("vs-sidebar",{staticClass:"sidebarx",attrs:{parent:"body","default-index":"1",color:"primary",spacer:""},model:{value:e.active,callback:function(t){e.active=t},expression:"active"}},[s("div",{staticClass:"header-sidebar",attrs:{slot:"header"},slot:"header"},[s("h3",[e._v("\n          Spotilize\n        ")])]),s("vs-sidebar-group",{attrs:{index:"1",title:"Music"}},[s("vs-sidebar-group",{attrs:{index:"1.1",title:"Playlists"}},[s("h4",[e._v("Coming Soon")])]),s("vs-sidebar-group",{attrs:{index:"1.2",title:"Recently Played"}},[s("h4",[e._v("Coming Soon")])]),s("vs-sidebar-group",{attrs:{index:"1.3",title:"For You"}},[s("h4",[e._v("Coming Soon")])])],1),s("vs-sidebar-group",{attrs:{index:"2",title:"Visualizations"}},[s("h4",[e._v("Coming Soon")])]),s("vs-sidebar-group",{attrs:{index:"3",title:"Settings"}},[s("h4",[e._v("Coming Soon")])]),s("vs-sidebar-group",{attrs:{index:"4",title:"Info"}},[s("vs-sidebar-item",{attrs:{index:"4.3",icon:"help"}},[e._v("\n          Help\n        ")]),s("vs-sidebar-item",{attrs:{index:"4.4",icon:"help"}},[e._v("\n          About\n        ")])],1),s("div",{staticClass:"footer-sidebar",attrs:{slot:"footer"},slot:"footer"},[s("vs-button",{attrs:{icon:"reply",color:"danger",type:"flat"},on:{click:function(t){e.logout()}}},[e._v("Logout")])],1)],1)],1)},m=[function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("label",{staticClass:"menu-toggler",attrs:{for:"menuToggler"}},[s("span",{staticClass:"menu-toggler__line"}),s("span",{staticClass:"menu-toggler__line"}),s("span",{staticClass:"menu-toggler__line"})])}],k={name:"Menu",data(){return{music:!1,visualizations:!1,settings:!1,active:!1}},methods:{logout(){localStorage.removeItem("access_token"),localStorage.removeItem("refresh_token"),this.$router.replace({name:"home"})},toggleAllFalseExcept(e){switch(e){case"music":this.visualizations=!1,this.settings=!1;break;case"visualizations":this.music=!1,this.settings=!1;break;case"settings":this.visualizations=!1,this.music=!1}},toggle(e){switch(e){case"music":this.toggleAllFalseExcept("music"),!0===this.music?this.music=!1:this.music=!0;break;case"visualizations":this.toggleAllFalseExcept("visualizations"),!0===this.visualizations?this.visualizations=!1:this.visualizations=!0;break;case"settings":this.toggleAllFalseExcept("settings"),!0===this.settings?this.settings=!1:this.settings=!0;break}}}},v=k,b=(s("cbdf"),Object(d["a"])(v,g,m,!1,null,"01bb3eb6",null));b.options.__file="Menu.vue";var y=b.exports,_=(s("93bf"),{name:"App",components:{Nav:p,Controls:f["a"],Hamburger:y},data(){return{ext:null,landing:!0,player:null,playerId:"",token:"",artist:"",album:"",prevTrack:"",track:"",trackId:"",paused:!0,refreshIntervalSet:!1,refreshInterval:0,mouseMoveSet:!1,menu:!1,isShowing:!0,timedelay:1,_delay:0,notifyCount:0}},created(){this.$wait.start("loading"),localStorage.access_token&&(chrome.runtime?chrome.runtime.sendMessage("jidcihllhnmbjbnoijfepopdpkpgeobe","version",e=>{e?e.version&&this.$router.replace({name:"visualizer"}):this.$router.replace({name:"home"})}):this.$router.replace({name:"home"}))},mounted(){},sockets:{paused:function(){this.$notify({group:"track",title:this.track+" - PAUSED",text:this.artist})},played:function(){this.$notify({group:"track",title:this.track,text:this.artist})}},watch:{$route(e,t){if("/"===e.path)this.terminateVis();else{if("/success"===e.path)return;if("/visualizer"!==e.path)return;this.initVis()}}},methods:{initVis(){this.landing=!1,this.refreshToken(),""===this.token&&this.getToken(),!1===this.refreshIntervalSet&&(this.createRefreshInterval(),this.refreshIntervalSet=!0),!1===this.mouseMoveSet&&(this._delay=setInterval(this.delayCheck,500),addEventListener("mousemove",this.mouseMove,!1),this.mouseMoveSet=!0),this.webPlayer()},terminateVis(){this.landing=!0,!0===this.refreshIntervalSet&&(clearInterval(this.refreshInterval),this.refreshIntervalSet=!1),!0===this.mouseMoveSet&&(clearInterval(this._delay),removeEventListener("mousemove",this.mouseMove,!1),this.mouseMoveSet=!1),null!==this.player&&(this.player.disconnect(),this.player=null)},async webPlayer(){if(null===this.player){let e=document.createElement("script");e.setAttribute("src","https://sdk.scdn.co/spotify-player.js"),document.head.appendChild(e),window.onSpotifyWebPlaybackSDKReady=(()=>{this.player=new Spotify.Player({name:"Spotilize",getOAuthToken:e=>{this.getToken(),e(this.token)}}),this.player.addListener("initialization_error",({message:e})=>{console.error(e)}),this.player.addListener("authentication_error",({message:e})=>{console.error(e)}),this.player.addListener("account_error",({message:e})=>{console.error(e)}),this.player.addListener("playback_error",({message:e})=>{console.error(e)}),this.player.addListener("player_state_changed",e=>{this.stateChanged(e)}),this.player.addListener("ready",({device_id:e})=>{console.log("Ready with Device ID",e),localStorage.setItem("device_id",e),this.songLoaded=!0,this.playerId=e,this.$socket.emit("ready",{player_id:this.playerId,token:this.token})}),this.player.addListener("not_ready",({device_id:e})=>{localStorage.removeItem("device_id"),this.songLoaded=!1,console.log("Device ID has gone offline",e)}),this.player.connect().then(e=>{e&&console.log("Webplayback SDK successfully connected to Spotify")})})}this.$socket.emit("ready",{player_id:this.playerId,access_token:this.token})},getToken(){localStorage.access_token?(this.token=localStorage.access_token,this.tokenExists=!0):this.tokenExists=!1},async refreshToken(){let e=localStorage.refresh_token;const t=await i["a"].refreshToken(e);if(!0===t.data.success){let e=t.data.access_token;localStorage.setItem("access_token",e),this.token=e,this.$socket.emit("tokenRefreshed",{token:this.token})}},async createRefreshInterval(){this.refreshInterval=setInterval(()=>{this.refreshToken()},6e5)},mouseMove(){this.isShowing=!0,this.timedelay=1,clearInterval(this._delay),this._delay=setInterval(this.delayCheck,500)},toggleMenu(){console.log("menu toggled"),!1===this.menu?this.menu=!0:this.menu=!1},delayCheck(){!0!==this.paused&&!0!==this.menu?(6===this.timedelay&&(this.isShowing=!1,this.timedelay=1),this.timedelay+=1):this.isShowing=!0},stateChanged(e){this.notifyCount>=2&&(this.notifyCount=0),this.prevTrack=this.track,this.track=e.track_window.current_track.name,this.paused=e.paused,this.artist=e.track_window.current_track.artists[0].name+" | "+e.track_window.current_track.album.name,this.notifyCount+=1,!0!==this.paused&&this.notifyCount<2&&this.track!==this.prevTrack&&(this.$notify({group:"track",title:this.track,text:this.artist}),this.trackId=e.track_window.current_track.id),this.$socket.emit("stateChanged",{state:e})}}}),w=_,C=(s("034f"),Object(d["a"])(w,n,r,!1,null,null,null));C.options.__file="App.vue";var S=C.exports,x=s("8c4f");a["default"].use(x["a"]);var T,P,I,$=new x["a"]({mode:"history",base:"/",routes:[{path:"/",name:"home",component:()=>s.e("chunk-79f8d383").then(s.bind(null,"bede"))},{path:"/success",name:"success",component:()=>s.e("chunk-177a1e37").then(s.bind(null,"8345"))},{path:"/system_settings",component:()=>s.e("chunk-47e8eefe").then(s.bind(null,"c66d"))},{path:"/visualizer",name:"visualizer",component:()=>s.e("chunk-23571990").then(s.bind(null,"f3fc"))},{path:"*",redirect:"/"}]}),z=s("43f9"),E=s.n(z),j=(s("51de"),s("9f7b")),M=(s("f9e3"),s("2dd8"),s("5132")),L=s.n(M),A=s("ecee"),R=s("c074"),O=s("ad3d"),D=s("f2d6"),F=s.n(D),N=s("fb9a"),V=s.n(N),B=(s("04f2"),s("c789"),s("ee98")),q=s.n(B);a["default"].use(F.a),void 0===T?(P="spotilize.herokuapp.com",I=""):(P=T.baseURL,I=T.serverPort),a["default"].use(new L.a({connection:P+I})),a["default"].use(V.a,{theme:{colors:{primary:"#5b3cc4",success:"rgb(23, 201, 100)",danger:"rgb(242, 19, 93)",warning:"rgb(255, 130, 0)",dark:"rgb(36, 33, 69)",green:"rgba(66,185,131, .3)"}}}),a["default"].use(q.a),A["c"].add(R["n"]),A["c"].add(R["b"]),A["c"].add(R["o"]),A["c"].add(R["m"]),A["c"].add(R["l"]),A["c"].add(R["i"]),A["c"].add(R["h"]),A["c"].add(R["j"]),A["c"].add(R["k"]),A["c"].add(R["q"]),A["c"].add(R["p"]),A["c"].add(R["a"]),A["c"].add(R["c"]),A["c"].add(R["f"]),A["c"].add(R["d"]),A["c"].add(R["e"]),A["c"].add(R["g"]),a["default"].component("font-awesome-icon",O["a"]),a["default"].use(j["a"]),a["default"].use(E.a),a["default"].config.productionTip=!1,new a["default"]({router:$,wait:new F.a,render:e=>e(S)}).$mount("#app")},"919b":function(e,t,s){"use strict";var a=s("aa39"),n=s.n(a);n.a},aa39:function(e,t,s){},b400:function(e,t,s){},c21b:function(e,t,s){},c75a:function(e,t,s){"use strict";var a=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{attrs:{id:"controls"}},[s("b-button-toolbar",{attrs:{"aria-label":"Toolbar with button groups"}},[s("b-button-group",{staticClass:"mx-1",attrs:{size:"lg"}},[1===e.repeatToggle?s("b-btn",{staticClass:"invertedPlaybackControls",on:{click:function(t){e.toggleRepeat()}}},[s("font-awesome-icon",{attrs:{icon:"redo"}})],1):e._e(),2===e.repeatToggle?s("b-btn",{staticClass:"halfPlaybackControls",on:{click:function(t){e.toggleRepeat()}}},[s("font-awesome-icon",{attrs:{icon:"redo"}})],1):e._e(),3===e.repeatToggle?s("b-btn",{staticClass:"playbackControls",on:{click:function(t){e.toggleRepeat()}}},[s("font-awesome-icon",{attrs:{icon:"redo"}})],1):e._e(),s("b-btn",{staticClass:"invertedPlaybackControls",on:{click:e.prev}},[s("font-awesome-icon",{attrs:{icon:"step-backward"}})],1)],1),s("b-button-group",{staticClass:"mx-1",attrs:{size:"lg"}},[!0===e.paused?s("b-btn",{staticClass:"invertedPlaybackControls",staticStyle:{"border-radius":"50%"},on:{click:function(t){e.play()}}},[s("font-awesome-icon",{attrs:{icon:"play"}})],1):!1===e.paused?s("b-btn",{staticClass:"playbackControls",staticStyle:{"border-radius":"50%"},on:{click:function(t){e.pause()}}},[s("font-awesome-icon",{attrs:{icon:"pause"}})],1):e._e()],1),s("b-button-group",{staticClass:"mx-1",attrs:{size:"lg"}},[s("b-btn",{staticClass:"invertedPlaybackControls",on:{click:e.next}},[s("font-awesome-icon",{attrs:{icon:"step-forward"}})],1),!1===e.shuffle?s("b-btn",{staticClass:"invertedPlaybackControls",on:{click:function(t){e.toggleShuffle()}}},[s("font-awesome-icon",{attrs:{icon:"random"}})],1):e._e(),!0===e.shuffle?s("b-btn",{staticClass:"playbackControls",on:{click:function(t){e.toggleShuffle()}}},[s("font-awesome-icon",{attrs:{icon:"random"}})],1):e._e()],1),s("b-button-group",{attrs:{size:"lg"}},[!1===e.fullScreen?s("b-btn",{staticClass:"invertedPlaybackControls screen",attrs:{id:"fullscreen"},on:{click:function(t){e.toggleFullScreen()}}},[s("font-awesome-icon",{attrs:{icon:"arrows-alt"}})],1):e._e(),!0===e.fullScreen?s("b-btn",{staticClass:"playbackControls screen",on:{click:function(t){e.toggleFullScreen()}}},[s("font-awesome-icon",{attrs:{icon:"compress-arrows-alt"}})],1):e._e()],1)],1)],1)},n=[],r=s("2f94"),i=(s("93bf"),{name:"Controls",props:{token:String,artist:String,track:String,paused:Boolean},data(){return{shuffle:!1,repeatToggle:1,fullScreen:!1}},mounted(){},methods:{toggleFullScreen(){if(!1===this.fullScreen){var e="fullscreen";this.fullScreen=!0}else{e="maximized";this.fullScreen=!1}var t={type:"fullscreenRequest",data:e};window.postMessage(t,"*")},async play(){const e=await r["a"].play({access_token:this.token});!0===e.data.success&&(this.paused=!1,this.$socket.emit("played"))},async pause(){const e=await r["a"].pause({access_token:this.token});!0===e.data.success&&(this.paused=!0,this.$socket.emit("paused"))},async next(){const e=await r["a"].nextTrack({access_token:this.token});!0===e.data.success&&setTimeout(()=>{this.getCurrentlyPlaying()},300)},async prev(){const e=await r["a"].previousTrack({access_token:this.token});!0===e.data.success&&setTimeout(()=>{this.getCurrentlyPlaying()},300)},async toggleShuffle(){if(!1===this.shuffle){const e=await r["a"].shuffle({shuffle:!0,access_token:this.token});!0===e.data.success&&(this.shuffle=!0)}else{const e=await r["a"].shuffle({shuffle:!1,access_token:this.token});!0===e.data.success&&(this.shuffle=!1)}},async toggleRepeat(){switch(this.repeatToggle){case 1:const e=await r["a"].repeat({type:"track",access_token:this.token});!0===e.data.success&&(this.repeatToggle=2);break;case 2:const t=await r["a"].repeat({type:"context",access_token:this.token});!0===t.data.success&&(this.repeatToggle=3);break;case 3:const s=await r["a"].repeat({type:"off",access_token:this.token});!0===s.data.success&&(this.repeatToggle=1);break}},async getCurrentlyPlaying(){const e=await r["a"].getCurrentlyPlaying(this.token);!1===e.data.is_playing&&null===e.data.body?(this.album="",this.artist="",this.track="",this.paused=!0):(this.album=e.data.object.item.album.name,this.artist=e.data.object.item.album.artists[0].name+" | "+this.album,this.track=e.data.object.item.name,this.paused=!e.data.is_playing)}}}),o=i,c=(s("0785"),s("2877")),l=Object(c["a"])(o,a,n,!1,null,"526e24db",null);l.options.__file="Controls.vue";t["a"]=l.exports},cbdf:function(e,t,s){"use strict";var a=s("fa9a"),n=s.n(a);n.a},fa9a:function(e,t,s){}});
//# sourceMappingURL=app.07160abb.js.map