{"remainingRequest":"/Users/Chris/Desktop/Programming/VueVisualizer/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/Chris/Desktop/Programming/VueVisualizer/src/views/Visualizer.vue?vue&type=style&index=0&id=54530b98&scoped=true&lang=css&","dependencies":[{"path":"/Users/Chris/Desktop/Programming/VueVisualizer/src/views/Visualizer.vue","mtime":1548125242000},{"path":"/Users/Chris/Desktop/Programming/VueVisualizer/node_modules/css-loader/index.js","mtime":499162500000},{"path":"/Users/Chris/Desktop/Programming/VueVisualizer/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":499162500000},{"path":"/Users/Chris/Desktop/Programming/VueVisualizer/node_modules/postcss-loader/lib/index.js","mtime":499162500000},{"path":"/Users/Chris/Desktop/Programming/VueVisualizer/node_modules/cache-loader/dist/cjs.js","mtime":1546594483000},{"path":"/Users/Chris/Desktop/Programming/VueVisualizer/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n#visualizer {\n\theight: 100%;\n\tcolor: white;\n\tbackground: #13242f;\n}\n#canvas {\n\tz-index: -1;\n}\n#visualizer:before {\n  background-size: 100%;\n  background-image: url('data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4gPHN2ZyB2ZXJzaW9uPSIxLjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PGRlZnM+PHJhZGlhbEdyYWRpZW50IGlkPSJncmFkIiBncmFkaWVudFVuaXRzPSJ1c2VyU3BhY2VPblVzZSIgY3g9IjUwJSIgY3k9IiIgcj0iOTUlIj48c3RvcCBvZmZzZXQ9IjIwJSIgc3RvcC1jb2xvcj0iIzAwMDAwMCIgc3RvcC1vcGFjaXR5PSIwLjAiLz48c3RvcCBvZmZzZXQ9Ijk1JSIgc3RvcC1jb2xvcj0iIzAwMDAwMCIvPjwvcmFkaWFsR3JhZGllbnQ+PC9kZWZzPjxyZWN0IHg9IjAiIHk9IjAiIHdpZHRoPSIxMDAlIiBoZWlnaHQ9IjEwMCUiIGZpbGw9InVybCgjZ3JhZCkiIC8+PC9zdmc+IA==');\n  background-image: -moz-radial-gradient(center, ellipse cover, rgba(0, 0, 0, 0) 20%, #000000 95%);\n  background-image: -webkit-radial-gradient(center, ellipse cover, rgba(0, 0, 0, 0) 20%, #000000 95%);\n  background-image: radial-gradient(ellipse cover at center, rgba(0, 0, 0, 0) 20%, #000000 95%);\n  position: absolute;\n  content: \"\";\n  z-index: 0;\n  opacity: 0.9;\n  height: 100%;\n  width: 100%;\n  left: 0;\n  top: 0;\n}\n#visualizer:after {\n\tbackground: url(\"https://s.cdpn.io/1715/noise-1.png\");\n  \tposition: absolute;\n  \tcontent: \"\";\n  \tz-index: 0;\n  \topacity: 0.8;\n  \theight: 100%;\n  \twidth: 100%;\n  \tleft: 0;\n  \ttop: 0;\n}\n",{"version":3,"sources":["Visualizer.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA4KA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Visualizer.vue","sourceRoot":"src/views","sourcesContent":["<template>\n\t<div id='visualizer'>\n\t\t<keep-alive>\n\t\t\t<canvas id='canvas'></canvas>\n\t\t</keep-alive>\n\t</div>\n</template>\n\n<script>\nimport SpotifyService from '@/services/SpotifyService';\nimport Particle from '@/util/Particle.js';\nimport Controls from '@/components/Controls';\n\n\nexport default {\n\tdata() {\n\t\treturn {\n\t\t\ttoken: '',\n\t\t\ttrackId: '',\n\t\t\ttrackName: '',\n\t\t\ttrackDuration: 0,\n\t\t\ttransferred: false,\n\t\t\tisPaused: false,\n\t\t\tNUM_PARTICLES: 250,\n\t\t\tparticles: [],\n\t\t\theight: null,\n\t\t\twidth: null,\n\t\t\tratio: null,\n\t\t\tctx: null,\n\t\t\tbands: null,\n\t\t}\n\t},\n\tsockets: {\n\t\tplayerReady: function(data) {\n\t\t\tthis.token = data.token;\n\t\t\tthis.playerId = data.player_id;\n\t\t\tif(this.transferred === false) {\n\t\t\t\tthis.transfer();\n\t\t\t}\n\t\t},\n\t\tstateChanged: function(data) {\n\t\t\tif(data.state.paused !== true && this.trackId !== data.state.track_window.current_track.id) {\n\t\t\t\tthis.trackId = data.state.track_window.current_track.id;\n\t\t\t\tthis.trackName = data.state.track_window.current_track.name;\n\t\t\t\tif(this.transferred === false) {\n\t\t\t\t\tthis.transfer();\n\t\t\t\t}\n\t\t\t}\n\t\t\tif(data.state.paused === true) {\n\t\t\t\tthis.isPaused = true;\n\t\t\t} else {\n\t\t\t\tthis.isPaused = false;\n\t\t\t}\n\t\t},\n\t\ttokenRefreshed: function(data) {\n\t\t\tthis.token = data.token;\n\t\t},\n\t\tpaused: function() {\n\n\t\t},\n\t\tplayed: function() {\n\t\t\t\n\t\t}\n\t},\n\tcreated() {\n\t\tvar self = this;\n\t\twindow.addEventListener(\"message\", (event) => {\n\t\t\t// We only accept messages from ourselves\n\t\t\tif (event.source != window)\n\t\t\t\treturn;\n\t\t\tif(event.data.type = \"frequency_data\")\n\t\t\t\tself.bands = event.data.data;\n\t\t\tif(event.data.type = \"fullScreenDone\")\n\t\t\t\tthis.sizeCanvas();\n\t\t});\n\t},\n\tmounted() {\n\t\tthis.sizeCanvas();\n\t\t//this.ctx.scale(this.ratio, this.ratio);\n\t},\n\tmethods: {\n\t\tsizeCanvas() {\n\t\tthis.ratio = window.devicePixelRatio;\n\t\tthis.height = window.innerHeight;\n\t\tthis.width = window.innerWidth;\n\t\tlet canvas = document.getElementById('canvas');\n\t\t//scale the canvas\n\t\tif(canvas !== null) {\n\t\t\tcanvas.setAttribute('height', this.height * this.ratio);\n\t\t\tcanvas.setAttribute('width', this.width * this.ratio);\n\t\t\tthis.ctx = canvas.getContext('2d');\n\t\t\tthis.ctx.globalCompositeOperation = 'lighter';\n\t\t}\n\t\t},\n\t\tasync transfer() {\n\t\t\tconsole.log('transferring');\n\t\t\tconst response = await SpotifyService.transferDevicePlayer({player_id: this.playerId, access_token: localStorage.access_token, play: true});\n\t\t\tif(response.data.success === true) {\n\t\t\t\tthis.setup();\n\t\t\t\tthis.transferred = true;\n\t\t\t}\n\t\t},\n\t\tasync getTrackInfo() {\n\t\t\tconst response = await SpotifyService.getTrackInfo(localStorage.access_token, this.trackId);\n\t\t\tif(response.data.success === true) {\n\n\t\t\t}\n\t\t},\n\t\tasync analyze() {\n\t\t\tconst response = await SpotifyService.analyzeTrack(localStorage.access_token, this.trackId);\n\t\t\tif(response.data.success === true) {\n\t\t\t\t\n\t\t\t}\n\t\t},\n\t\tsetup() {\n\t\t\tvar analyser, error, i, intro, j, particle, ref, warning, x, y;\n\t\t\tfor (i = 0; i <= this.NUM_PARTICLES; i++) {\n        \t\tx = this.random(this.width);\n        \t\ty = this.random(this.height);\n        \t\tparticle = new Particle(x, y);\n        \t\tparticle.energy = this.random(particle.band / 256);\n        \t\tthis.particles.push(particle);\n\t\t\t}\n\t\t\trequestAnimationFrame(this.draw);\n\t\t},\n\t\tdraw() {\n\t\t\tthis.ctx.clearRect(0, 0, this.width * this.ratio, this.height * this.ratio);\n\t\t\tthis.update();\n\t\t\trequestAnimationFrame(this.draw)\n\t\t},\n\t\tupdate() {\n\t\t\tlet particle;\n      \tfor (let j = 0; j < this.particles.length; j++) {\n\t\t\t\t  particle = this.particles[j];\n\t\t\t\t  if(this.bands !== undefined) {\n\t\t\t\t\t  particle.energy = this.bands[particle.band] / 256;\n\t\t\t\t  }\n        \t\t// recycle particles\n        \t\tif (particle.y < -particle.size * particle.level * particle.scale) {\n         \t\tparticle.reset();\n          \t\tparticle.x = this.random(this.width);\n\t\t\t\t\tparticle.y = this.height + (particle.size * particle.scale * particle.level);\n        \t\t}\n        \t\tparticle.move();\n        \t\tparticle.draw(this.ctx);\n\t\t\t}\n\t\t},\n\t\trandom (min, max = undefined) {\n\n\t\t\tif (this.isArray(min))\n\n\t\t\t\treturn min[~~(Math.random() * min.length)];\n\n\t\t\tif (!this.isNumber(max))\n\n\t\t\t\tmax = min || 1, min = 0;\n\n\t\t\treturn min + Math.random() * (max - min);\n\t\t},\n\t\tisArray(object) {\n\n\t\t\treturn Object.prototype.toString.call(object) == '[object Array]';\n\t\t},\n\t\tisNumber(object) {\n\n\t\t\treturn typeof object == 'number';\n\t\t}\n\t}\n}\n</script>\n\n<style scoped>\n#visualizer {\n\theight: 100%;\n\tcolor: white;\n\tbackground: #13242f;\n}\n#canvas {\n\tz-index: -1;\n}\n#visualizer:before {\n  background-size: 100%;\n  background-image: url('data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4gPHN2ZyB2ZXJzaW9uPSIxLjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PGRlZnM+PHJhZGlhbEdyYWRpZW50IGlkPSJncmFkIiBncmFkaWVudFVuaXRzPSJ1c2VyU3BhY2VPblVzZSIgY3g9IjUwJSIgY3k9IiIgcj0iOTUlIj48c3RvcCBvZmZzZXQ9IjIwJSIgc3RvcC1jb2xvcj0iIzAwMDAwMCIgc3RvcC1vcGFjaXR5PSIwLjAiLz48c3RvcCBvZmZzZXQ9Ijk1JSIgc3RvcC1jb2xvcj0iIzAwMDAwMCIvPjwvcmFkaWFsR3JhZGllbnQ+PC9kZWZzPjxyZWN0IHg9IjAiIHk9IjAiIHdpZHRoPSIxMDAlIiBoZWlnaHQ9IjEwMCUiIGZpbGw9InVybCgjZ3JhZCkiIC8+PC9zdmc+IA==');\n  background-image: -moz-radial-gradient(center, ellipse cover, rgba(0, 0, 0, 0) 20%, #000000 95%);\n  background-image: -webkit-radial-gradient(center, ellipse cover, rgba(0, 0, 0, 0) 20%, #000000 95%);\n  background-image: radial-gradient(ellipse cover at center, rgba(0, 0, 0, 0) 20%, #000000 95%);\n  position: absolute;\n  content: \"\";\n  z-index: 0;\n  opacity: 0.9;\n  height: 100%;\n  width: 100%;\n  left: 0;\n  top: 0;\n}\n#visualizer:after {\n\tbackground: url(\"https://s.cdpn.io/1715/noise-1.png\");\n  \tposition: absolute;\n  \tcontent: \"\";\n  \tz-index: 0;\n  \topacity: 0.8;\n  \theight: 100%;\n  \twidth: 100%;\n  \tleft: 0;\n  \ttop: 0;\n}\n</style>\n"]}]}